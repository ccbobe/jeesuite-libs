(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{834:function(t,a,s){"use strict";s.r(a);var e=s(111),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),s("p",[t._v("为了帮助大家快速开始学习Jeesuite，我们提供了一套基于"),s("code",[t._v("Spring Cloud")]),t._v("整合"),s("code",[t._v("Jeesuite")]),t._v("的示例项目。接下里将讲解如何快速本地运行项目。")]),t._v(" "),s("h1",{attrs:{id:"步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤"}},[t._v("#")]),t._v(" 步骤")]),t._v(" "),s("h2",{attrs:{id:"搭建配置中心"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建配置中心"}},[t._v("#")]),t._v(" 搭建配置中心")]),t._v(" "),s("p",[t._v("请参考文档"),s("RouterLink",{attrs:{to:"/docments/config-center.html"}},[t._v("配置中心")]),t._v("在本地运行配置中心，需要导入可选的测试数据。")],1),t._v(" "),s("h2",{attrs:{id:"下载项目示例项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载项目示例项目"}},[t._v("#")]),t._v(" 下载项目示例项目")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git clone https://gitee.com/vakinge/jeesuite-demo.git\n")])])]),s("h2",{attrs:{id:"启动注册中心"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动注册中心"}},[t._v("#")]),t._v(" 启动注册中心")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd ./jeesuite-demo/demo-eureka-server\n./application.sh start\n")])])]),s("p",[t._v("启动完成，打开："),s("code",[t._v("http://127.0.0.1:8761/")]),t._v("，账号密码：admin/admin123")]),t._v(" "),s("h2",{attrs:{id:"启动网关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动网关"}},[t._v("#")]),t._v(" 启动网关")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd ./jeesuite-demo/demo-apigataway\n./application.sh start\n")])])]),s("p",[t._v("启动完成，打开："),s("code",[t._v("http://127.0.0.1:8080/")]),t._v("，账号密码：admin/admin123,此时可以登录，但是"),s("code",[t._v("数据管理")]),t._v("还不能正常访问。")]),t._v(" "),s("h2",{attrs:{id:"启动模板服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动模板服务"}},[t._v("#")]),t._v(" 启动模板服务")]),t._v(" "),s("p",[t._v("由于该服务需要用到数据库，所以启动前需要完成两件准备工作。")]),t._v(" "),s("ol",[s("li",[t._v("支持"),s("code",[t._v("docs/init-table.sql")]),t._v("初始化数据库表")]),t._v(" "),s("li",[t._v("登录配置中心→配置管理，找到"),s("code",[t._v("模板项目")]),t._v("编辑配置的数据库配置即可。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd ./jeesuite-demo/demo-template-project\n./application.sh start\n")])])]),s("p",[t._v("启动完成后，刷新eureka注册中心，看看注册情况，注册成功，再打开"),s("code",[t._v("数据管理")]),t._v("即可。")]),t._v(" "),s("p",[s("strong",[t._v("说明")]),t._v("： 以上只适合linux或者mac，如果是window，最简单的方式是直接导入IDE，在IDE分别启动。")]),t._v(" "),s("h2",{attrs:{id:"生成dao层"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生成dao层"}},[t._v("#")]),t._v(" 生成DAO层")]),t._v(" "),s("p",[t._v("打开 "),s("code",[t._v("/src/test/resources/generatorConfig.xml")]),t._v("，编辑数据库连接信息，内容如下：")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("jdbcConnection")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("driverClass")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.mysql.cj.jdbc.Driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("connectionURL")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jdbc:mysql://127.0.0.1:3306/demo_db?serverTimezone=UTC"),s("span",{pre:!0,attrs:{class:"token entity named-entity",title:"&"}},[t._v("&amp;")]),t._v("characterEncoding=utf-8"),s("span",{pre:!0,attrs:{class:"token entity named-entity",title:"&"}},[t._v("&amp;")]),t._v("nullCatalogMeansCurrent=true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("userId")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("root"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("jdbcConnection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("替换我们要生成的数据库表，配置如下：")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("table")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("tableName")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sys_account"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("domainObjectName")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("AccountEntity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("generatedKey")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("column")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("sqlStatement")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("identity")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("table")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\n")])])]),s("p",[t._v("配置说明：")]),t._v(" "),s("ul",[s("li",[t._v("jdbcConnection：连接数据库配置，如果用密码的话，加上 "),s("code",[t._v("passport")]),t._v(" 属性即可。")]),t._v(" "),s("li",[t._v("targetProject：输出的目录路径")]),t._v(" "),s("li",[t._v("targetPackage：输出的包路径")]),t._v(" "),s("li",[t._v("table：要生成的表，如果不是自增ID，就不需要配置 "),s("code",[t._v("generatedKey")]),t._v(" 项。")])]),t._v(" "),s("p",[t._v("配置完成，我们执行单元测试方法生成 Entity、Mapper 文件。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("mvn clean "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" -Dtest"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("helper.MyBatisGeneratorTest"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#testRun")]),t._v("\n")])])]),s("h2",{attrs:{id:"基于模板项目生成其他微服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于模板项目生成其他微服务"}},[t._v("#")]),t._v(" 基于模板项目生成其他微服务")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("demo-template-project")]),t._v("目录下执行以下脚本生成新的微服务")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 参数：项目前缀，base包名，模块名称")]),t._v("\n./projectgen.sh demo com.jeesuite.demo account\n")])])]),s("h2",{attrs:{id:"开启redis缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启redis缓存"}},[t._v("#")]),t._v(" 开启redis缓存")]),t._v(" "),s("p",[t._v("模板服务提供了一个缓存测试接口："),s("code",[t._v("http://127.0.0.1:8080/api/template/demo/cacheTest")]),t._v("。要开启缓存只需要在配置中心增加如下配置：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("jeesuite.cache.servers=127.0.0.1:6379\njeesuite.cache.password=123456\njeesuite.cache.database=0\n")])])]),s("p",[t._v("然后重启服务即可。")]),t._v(" "),s("h2",{attrs:{id:"定任务支持分布式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定任务支持分布式"}},[t._v("#")]),t._v(" 定任务支持分布式")]),t._v(" "),s("blockquote",[s("p",[t._v("模板项目启动了一个demoTask定时任务，如果需要支持分布式，只需要增加一个配置指定注册zookeeper地址即可。")])]),t._v(" "),s("p",[t._v("编辑配置中心配置，增加以下配置：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("jeesuite.task.registryType=zookeeper\njeesuite.task.registryServers=127.0.0.1:2181\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);